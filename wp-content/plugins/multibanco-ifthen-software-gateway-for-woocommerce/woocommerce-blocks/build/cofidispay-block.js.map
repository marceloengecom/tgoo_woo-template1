{"version":3,"file":"cofidispay-block.js","mappings":"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","sources":["webpack://test/external window \"React\"","webpack://test/external window [\"wc\",\"wcBlocksRegistry\"]","webpack://test/external window [\"wc\",\"wcSettings\"]","webpack://test/external window [\"wp\",\"htmlEntities\"]","webpack://test/external window [\"wp\",\"i18n\"]","webpack://test/webpack/bootstrap","webpack://test/webpack/runtime/compat get default export","webpack://test/webpack/runtime/define property getters","webpack://test/webpack/runtime/hasOwnProperty shorthand","webpack://test/webpack/runtime/make namespace object","webpack://test/./woocommerce-blocks/cofidispay/src/index.js"],"sourcesContent":["module.exports = window[\"React\"];","module.exports = window[\"wc\"][\"wcBlocksRegistry\"];","module.exports = window[\"wc\"][\"wcSettings\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","module.exports = window[\"wp\"][\"i18n\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * External dependencies\n */\nimport { registerPaymentMethod } from '@woocommerce/blocks-registry';\nimport { __ } from '@wordpress/i18n';\nimport { getSetting } from '@woocommerce/settings';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport React, { useEffect } from 'react';\n//import { CART_STORE_KEY } from '@woocommerce/block-data';\n//import { useSelect } from '@wordpress/data';\n\nconst settings = getSetting( 'cofidispay_ifthen_for_woocommerce_data', {} );\nconst defaultLabel = __(\n\t'Cofidis Pay',\n\t'multibanco-ifthen-software-gateway-for-woocommerce'\n) + ' (ifthenpay)';\nconst label = decodeEntities( settings.title ) || defaultLabel;\n\n/**\n * Notices\n */\n// Testing notices\n/*const { dispatch } = window.wp.data;\ndispatch( 'core/notices' ).createErrorNotice(\n\t__(\n\t\t'Payment failed on the gateway. Please try again.',\n\t\t'multibanco-ifthen-software-gateway-for-woocommerce'\n\t),\n\t{ context: 'wc/checkout' }\n);*/\n// Testing getting data from the Store API - We need to do this only on page load and show the notice\n/*const { cofidisFailedPayment } = useSelect(\n\t( select ) => select( 'wc/store/cart' ).getCartData().extensions.ifthenpay\n);\nconsole.log( cofidisFailedPayment );*/\n//useEffect(() => {\n//\tconsole.log( 'useEffect' );\n//});\n\n/**\n * Content component\n *\n * @param {*} props Props from payment API.\n */\nconst Content = ( props ) => {\n\t// Only runs when the payment method is selected\n\t//console.log( props );\n\t// Are we returning from a failed payment?\n\t//const { extensions } = useSelect((select) => {\n\t//\tconst store = select(CART_STORE_KEY);\n\t//\tconst { extensions } = store.getCartData();\n\t//\treturn {\n\t//\t\textensions,\n\t//\t};\n\t//});\n\t//console.log( extensions.ifthenpay.cofidisFailedPayment );\n\t//if ( extensions?.ifthenpay?.cofidisFailedPayment ) {\n\t//\tconsole.log( extensions.ifthenpay.cofidisFailedPayment );\n\t//}\n\t// Description\n\tvar description = React.createElement( 'div', null, decodeEntities( settings.description || '' ) );\n\treturn description;\n};\n\n/**\n * Label component\n *\n * @param {*} props Props from payment API.\n */\nconst Label = ( props ) => {\n\tvar icon = React.createElement( 'img', { src: settings.icon, width: settings.icon_width, height: settings.icon_height, style: { display: 'inline' } } );\n\tvar span = React.createElement( 'span', { className: 'wc-block-components-payment-method-label wc-block-components-payment-method-label--with-icon' }, icon, decodeEntities( settings.title ) || defaultLabel );\n\treturn span;\n};\n\n/**\n * CanMakePayment function\n *\n * @param checkoutData Checkout details.\n */\nconst CanMakePayment = ( checkoutData ) => {\n\t// Error notice?\n\tvar error_notice = checkoutData?.cart?.extensions?.ifthenpay?.cofidisFailedPayment;\n\tif ( error_notice ) {\n\t\tconst { dispatch } = window.wp.data;\n\t\tdispatch( 'core/notices' ).createErrorNotice(\n\t\t\terror_notice,\n\t\t\t{ context: 'wc/checkout' }\n\t\t);\n\t}\n\t//Euro?\n\tif ( checkoutData.cartTotals.currency_code != 'EUR' ) {\n\t\treturn false;\n\t}\n\t//Portugal?\n\tif ( settings.only_portugal ) {\n\t\tif ( checkoutData.billingData.country != 'PT' && checkoutData.shippingAddress.country != 'PT' ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\t//Minimum and maximum value\n\tvar cart_total = checkoutData.cartTotals.total_price / 100; //It's return in cents (?)\n\tif ( settings.only_above ) {\n\t\tif ( cart_total < settings.only_above ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\tif ( settings.only_bellow ) {\n\t\tif ( cart_total > settings.only_bellow ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\n/**\n * Payshop payment method config object.\n */\nconst ifthenpayCofidisPaymentMethod = {\n\tname: 'cofidispay_ifthen_for_woocommerce',\n\tlabel: React.createElement( Label, null ),\n\tcontent: React.createElement( Content, null ),\n\tedit: React.createElement( Content, null ),\n\ticons: null,\n\tcanMakePayment: CanMakePayment,\n\tariaLabel: label,\n\tsupports: {\n\t\tfeatures: settings.supports,\n\t},\n};\n\nregisterPaymentMethod( ifthenpayCofidisPaymentMethod );\n"],"names":["registerPaymentMethod","__","getSetting","decodeEntities","React","useEffect","settings","defaultLabel","label","title","Content","props","description","createElement","Label","icon","src","width","icon_width","height","icon_height","style","display","span","className","CanMakePayment","checkoutData","error_notice","cart","extensions","ifthenpay","cofidisFailedPayment","dispatch","window","wp","data","createErrorNotice","context","cartTotals","currency_code","only_portugal","billingData","country","shippingAddress","cart_total","total_price","only_above","only_bellow","ifthenpayCofidisPaymentMethod","name","content","edit","icons","canMakePayment","ariaLabel","supports","features"],"sourceRoot":""}